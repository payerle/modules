mod431: module purge
mod431: module load pgi/18.4
mod431: module load openmpi/3.1
mod431: module load foo/1.1
mod431: module list
Currently Loaded Modulefiles:
 1) pgi/18.4   2) openmpi/3.1   3) foo/1.1  
mod431: foo
This is fake foo 1.1 (pgi/18.4, openmpi/3.1)
mod431: module --auto switch pgi intel/2018
Switching from pgi/18.4 to intel/2018
  Unloading dependent: foo/1.1 openmpi/3.1
  Reloading dependent: openmpi/3.1 foo/1.1
mod431: module list
Currently Loaded Modulefiles:
 1) intel/2018   2) openmpi/3.1   3) foo/1.1  
mod431: foo
This is fake foo 1.1 (intel/2018, openmpi/3.1)
mod431: mpirun
This is fake mpirun (openmpi/3.1, intel/2018)
