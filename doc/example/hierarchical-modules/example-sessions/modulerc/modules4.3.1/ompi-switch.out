mod4.3.1 (modulerc)> module purge
mod4.3.1 (modulerc)> module load pgi/19.4
mod4.3.1 (modulerc)> module load openmpi/4.0
mod4.3.1 (modulerc)> module list
Currently Loaded Modulefiles:
 1) pgi/19.4   2) openmpi/4.0/pgi/19.4(default)  
mod4.3.1 (modulerc)> mpirun
This is fake mpirun (openmpi/4.0, pgi/19.4)
mod4.3.1 (modulerc)> module switch --auto pgi intel/2019


**** ERROR *****:

Compiler Mismatch

Package openmpi/4.0/pgi/19.4 does not appear to be built for currently
loaded compiler intel/2019.





Loading openmpi/4.0/pgi/19.4
  ERROR: Module evaluation aborted

Switching from pgi/19.4 to intel/2019
  WARNING: Reload of dependent openmpi/4.0/pgi/19.4 failed
  Unloading dependent: openmpi/4.0/pgi/19.4
mod4.3.1 (modulerc)> module list
Currently Loaded Modulefiles:
 1) intel/2019  
mod4.3.1 (modulerc)> mpirun
$MOD_GIT_ROOTDIR/doc/example/hierarchical-modules/example-sessions/common_code.sh: line 35: mpirun: command not found
